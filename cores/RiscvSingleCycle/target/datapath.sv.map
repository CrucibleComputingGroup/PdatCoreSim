{"version":3,"file":"datapath.sv.map","sources":["../src/datapath.veryl"],"names":["","// Datapath for single-cycle RISC-V processor","module","RiscvSingleCycle_datapath","(","input","logic","clk",",","rst","// Instruction memory interface","output","[","32","]","imem_addr","imem_rdata","// Data memory interface","dmem_addr","dmem_wdata","dmem_rdata","// Control signals from control unit","branch","jump","mem_to_reg","alu_src","2","alu_a_src","reg_write","4","alu_op","3","imm_sel","funct3","pc_src",")",";","// PC source selection","localparam","PC_PLUS4","=","2'b00","PC_BRANCH","2'b01","PC_JALR","2'b10","// ALU A source selection","ALU_A_RS1","ALU_A_PC","ALU_A_ZERO","// Program Counter","pc","pc_next","pc_plus4","pc_target","// Instruction fields","instruction","rs1_addr","rs2_addr","rd_addr","// Register file signals","rs1_data","rs2_data","rd_data","// Immediate","imm","// ALU signals","alu_a","alu_b","alu_result","alu_zero","// Branch signals","branch_taken","take_branch","// Instruction from memory","always_comb","// Extract instruction fields (RV32E uses 4-bit register addresses)","18",":","15","23","20","10","7","// Register file instantiation","RiscvSingleCycle_regfile","regfile_inst","we","// Immediate generator instantiation","RiscvSingleCycle_immgen","immgen_inst","// ALU input selection","begin","case",") inside","end","32'h0","default","endcase","((",") ? (",") : (","// ALU instantiation","RiscvSingleCycle_alu","alu_inst","op","a","b","result","zero","// Branch comparator instantiation","RiscvSingleCycle_branch_comp","branch_comp_inst","// Write-back data selection",") : ","// PC calculation","+","// Branch decision","&","// PC next value selection","// JAL","// JALR: (rs1 + imm) & ~1","32'hFFFFFFFE","// PC register","always_ff","if","0","else","endmodule"],"mappings":"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"}